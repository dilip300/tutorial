<h1 lang="en">4. Matching booleans</h1>

<h1 lang="fr">4. Correspondance des booléens</h1>

<p lang="en">
  So far we have learned how to <a href="ch2.html">match path
  segments</a> with the <code>on</code> method by passing a string,
  and how to <a href="ch3.html">capture path segments</a> by passing
  a symbol. The last use case for <code>on</code> is to evaluate
  the argument as a boolean, and run the block only if the argument
  is <code>true</code>. Note that I didn't say "truthy": the argument
  has to be equal to <code>true</code>, and anything else will
  evaluate to <code>false</code>.
</p>

<p lang="fr">
  Jusqu'ici on a appris comment <a href="ch2.html">matcher des
  segments de chemin</a> avec la méthode <code>on</code> en lui
  passant une chaîne, et comment <a href="ch3.html">capturer le
  chemin de segments</a> en lui passant un symbole. Le dernier cas
  d'utilisation de <code>on</code> c'est d'évaluer l'argument comme
  un booléen, et de n'exécuter le bloc que si l'argument
  est<code>true</code>. Notez que je n'ai pas dit "truthy": l'argument
  doit être égal à <code>true</code>, et tout autre valeur donnera
  <code>false</code>.
</p>

<p lang="en">
  In the following example, the block will be executed only if the
  visitor arrived from a different website:
</p>

<p lang="fr">
  Dans l'exemple suivant, le bloc ne sera exécuté que si le visiteur
  arrive d'un autre site web :
</p>

<pre>
  require <span>"syro"</span>

  App = Syro.new do
    on env[<span>"HTTP_REFERER"</span>] != <span>""</span> do
      get do
        res.text <span>"I got #{</span>env[<span>"HTTP_REFERER"</span>]<span>}"</span>
      end
    end
  end

  env = {
    <span>"REQUEST_METHOD"</span> =&gt; <span>"GET"</span>,
    <span>"PATH_INFO"</span>      =&gt; <span>"/"</span>,
    <span>"HTTP_REFERER"</span>   =&gt; <span>"http://example.com"</span>,
  }

  p App.call(env)
</pre>

<p lang="en">
  Run the code and you will get this output:
</p>

<p lang="fr">
 Exécutez le code et vous allez obtenir le résultat suivant :
</p>

<pre>
  [200,
   {<span>"Content-Length"</span>=&gt;<span>"24"</span>,
    <span>"Content-Type"</span>=&gt;<span>"text/plain"</span>},
   [<span>"I got http://example.com"</span>]]
</pre>

<h2 lang="en">Exercise</h2>

<h2 lang="fr">Exercice</h2>

<p lang="en">
  Combine different matchers, nest them, and modify the <code>env</code>
  variable to get familiar with this approach of building applications.
</p>

<p lang="fr">
  Combinez différents matchers, imbriquez-les, et modifiez la
  variable <code>env</code> pour vous familiariser avec cette
  approche de construction d'applications.
</p>

<br>

<p lang="en">
  <small>
    &larr; <a href="ch3.html">Prev</a>
    | <a href="index.html">Index</a>
    | <a href="ch5.html">Next</a> &rarr;
  </small>
</p>

<p lang="fr">
  <small>
    &larr; <a href="ch3.html">Précédent</a>
    | <a href="index.html">Sommaire</a>
    | <a href="ch5.html">Suivant</a> &rarr;
  </small>
</p>
